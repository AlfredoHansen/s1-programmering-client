<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opret bruger</title>
</head>
<body>
    <h1>Opret bruger</h1>

    Du kan gå tilbage til forsiden <a href="products.html">her</a> <br> <br>
    
    Dit fulde navn: <br>
    <input name="name" id="name" style="width: 200px;" placeholder="Skriv dit navn her"/><br /><br />

    Din emailadresse:<br>
    <input name="email" id="email" style="width: 200px;" placeholder="Skriv din email her"/><br /><br />

    Dit password: <br>
    <input password="password" type="password" id="password" style="width: 200px;" placeholder="Skriv dit password her"/><br><br>

    <input type="hidden" name="id" id="id">

    <button onclick="sendNewUserData()">
        Opret bruger
    </button>
    <br><br>

    Hvis du allerede har en bruger kan du logge ind <a href="users-login.html">her</a>
    
    <script>
        //Definer sendNewUserData
        function sendNewUserData() {
            
            //Hent name fra input felt id="name"
            var name = document.getElementById('name').value;

            //Hent email fra input felt id="email"
            var email = document.getElementById('email').value;

            //Hent password fra input felt id="password"
            var password = document.getElementById('password').value;

            //Lav et nyt XMLHTTPRequest
            const request = new XMLHttpRequest();

            //Definer URL
            const url = 'http://localhost:3000/api/users/create?name='+name+'&email='+email+'&password='+password+'&is_gold=false&usertype_id=1';

            //Åben forbindelsen til serveren ud fra vores url (endpoint)
            request.open("GET", url);

            //Send request til server
            request.send();

            //Direkte link til login efter man er oprettet
            request.onload = (e) => {
                location.href = "users-login.html";
            }
        }
    </script>
</body>
</html>
